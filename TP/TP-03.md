## 🧪 **TP-03 — Simulation d’un ransomware Python avec chiffrement total du système (usage pédagogique uniquement)**

### 🎯 Objectif :
Créer un **script Python pédagogique** simulant le comportement d’un **ransomware** capable de chiffrer l’intégralité d’un système Linux (y compris les dossiers système) **en place**, sans créer de copies, en utilisant la **cryptographie symétrique**, et automatiser l'exfiltration de la clé suivie d’un **redémarrage du serveur**.

---

### 🧩 Contexte :
Dans le cadre d’un entraînement avancé en **cybersécurité offensive (Red Team)** ou d’un **TP en environnement isolé**, vous devez simuler une attaque de type **ransomware total**. L'objectif est d'illustrer les risques critiques d’un accès root malveillant en environnement Linux.

> ⚠️ **Ce TP est strictement réservé à un environnement de test (VM isolée, sandbox)**. Toute exécution en environnement réel, en entreprise ou sur machine personnelle, est **formellement interdite** et illégale.

---

### ✅ Travail attendu :
Vous devez concevoir un script Python `ransomware_total.py` qui réalise les étapes suivantes :

1. **Génération d’une clé de chiffrement symétrique** (ex : AES ou Fernet).
2. **Transmission sécurisée** de la clé via **SFTP** à une machine d’attaque (serveur SFTP distant).
3. **Chiffrement in-place** : tous les fichiers accessibles depuis `/` doivent être chiffrés directement, **en remplaçant leur contenu par la version chiffrée**.
4. **Aucune exclusion de dossier** : les dossiers système (`/etc`, `/usr`, `/var`, `/boot`, `/lib`, `/bin`, etc.) doivent également être chiffrés si les permissions le permettent.
5. **Redémarrage automatique du système** à la fin de l’opération.

---

### ⚙️ Contraintes techniques :
- Le script doit être **exécuté avec les privilèges root**.
- Utilisation de la bibliothèque `cryptography` (AES/Fernet).
- Transfert de la clé vers un serveur distant via **SFTP** avec `paramiko`.
- Aucune copie de fichier ne doit être créée : le chiffrement se fait **sur place** (fichiers écrasés).
- Tous les fichiers modifiables par root doivent être chiffrés, quelle que soit leur localisation.
- Le script doit afficher clairement les étapes de l’exécution (logs).

---

### 🛠️ Technologies & Librairies autorisées :
- `cryptography` (Fernet ou AES pour le chiffrement symétrique)
- `paramiko` pour le transfert SFTP
- Modules standards : `os`, `pathlib`, `subprocess`, `socket`, `sys`, `logging`

---

### 🎁 Bonus (optionnel) :
- Ajouter un message d’alerte simulant une demande de rançon (`README.txt` dans `/root` ou `/`).
- Créer une version du script permettant le **déchiffrement** en fournissant manuellement la clé.
- Ajout d’une interface CLI (`--encrypt`, `--decrypt`, `--status`).

---

### 📌 Consignes de sécurité :
- Ce TP doit être exécuté **exclusivement dans un environnement contrôlé**.
- Ne pas connecter la machine à Internet pendant les tests.
- Informer l’instructeur avant l’exécution du script pour validation du contexte.
